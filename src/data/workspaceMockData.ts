import { Workspace, Thread, ThreadMessage, Artifact } from '@/types/workspace';

export const mockWorkspaces: Workspace[] = [
  {
    id: 'ws-1',
    name: 'Acme Corp',
    clientName: 'Acme Corporation',
    threads: [],
    createdAt: new Date('2026-01-15'),
  },
  {
    id: 'ws-2',
    name: 'Bloom Beauty',
    clientName: 'Bloom Beauty Co.',
    threads: [],
    createdAt: new Date('2026-02-01'),
  },
];

export const mockThreads: Thread[] = [
  {
    id: 'thread-1',
    title: 'Spring Sale Campaign',
    workspaceId: 'ws-1',
    connectedAccount: 'Facebook Ads',
    messages: [],
    artifacts: [],
    rules: [],
    createdAt: new Date('2026-02-10'),
    updatedAt: new Date('2026-02-16'),
    isActive: true,
    status: 'live-campaign',
    pinnedArtifactIds: [],
  },
  {
    id: 'thread-2',
    title: 'Brand Awareness Q1',
    workspaceId: 'ws-1',
    messages: [],
    artifacts: [],
    rules: [],
    createdAt: new Date('2026-02-08'),
    updatedAt: new Date('2026-02-15'),
    isActive: false,
    status: 'archived',
    pinnedArtifactIds: [],
  },
  {
    id: 'thread-3',
    title: 'Product Launch - Serum',
    workspaceId: 'ws-2',
    connectedAccount: 'Facebook Ads',
    messages: [],
    artifacts: [],
    rules: [],
    createdAt: new Date('2026-02-12'),
    updatedAt: new Date('2026-02-16'),
    isActive: true,
    status: 'active',
    pinnedArtifactIds: [],
  },
];

export const mockArtifacts: Artifact[] = [
  // ... keep existing code
  {
    id: 'art-1',
    type: 'campaign-blueprint',
    title: 'Spring Sale â€” Facebook Ads',
    status: 'draft',
    version: 1,
    isCollapsed: false,
    createdAt: new Date('2026-02-14'),
    updatedAt: new Date('2026-02-16'),
    data: {
      campaignName: 'Spring Sale 2026',
      objective: 'Sales',
      platform: 'Facebook',
      budget: { daily: 50, total: 1500 },
      targeting: { ageRange: '25-45', interests: ['Fashion', 'Shopping'], locations: ['US', 'UK'] },
      schedule: { startDate: '2026-03-01', endDate: '2026-03-31' },
      adSets: 3,
      primaryText: 'Up to 40% off everything this Spring! Shop now and refresh your wardrobe.',
      cta: 'Shop Now',
    },
  },
  {
    id: 'art-2',
    type: 'creative-set',
    title: 'Spring Sale Creatives',
    status: 'draft',
    version: 1,
    isCollapsed: true,
    createdAt: new Date('2026-02-15'),
    updatedAt: new Date('2026-02-16'),
    data: {
      name: 'Spring Sale Set',
      count: 3,
      items: [
        { id: 'cr-1', label: 'Hero Banner', format: 'image', dimensions: '1200Ã—628' },
        { id: 'cr-2', label: 'Story Ad', format: 'image', dimensions: '1080Ã—1920' },
        { id: 'cr-3', label: 'Carousel Card 1', format: 'image', dimensions: '1080Ã—1080' },
      ],
    },
  },
  {
    id: 'art-3',
    type: 'video-creative',
    title: 'Avatar Video â€” Spring Promo',
    status: 'draft',
    version: 1,
    isCollapsed: true,
    createdAt: new Date('2026-02-15'),
    updatedAt: new Date('2026-02-16'),
    data: {
      name: 'Spring Promo Video',
      duration: '30s',
      avatar: 'Sophia',
      script: "Hey there! Spring is finally here, and we've got something special for you. Our biggest sale of the season is live â€” up to 40% off everything. Don't miss out!",
      status: 'ready',
    },
  },
  {
    id: 'art-4',
    type: 'performance-snapshot',
    title: 'Weekly Performance â€” Feb 10-16',
    status: 'live',
    version: 2,
    isCollapsed: true,
    createdAt: new Date('2026-02-16'),
    updatedAt: new Date('2026-02-16'),
    data: {
      dateRange: 'Feb 10 â€” Feb 16, 2026',
      metrics: { spent: 342, revenue: 1890, roi: 4.5, conversions: 47, ctr: 3.2, impressions: 28500 },
      topCampaign: 'Spring Sale â€” Retargeting',
      recommendations: [
        'Increase budget on top ad set by 20%',
        'Pause underperforming creative #3',
        'Test new audience: Lifestyle enthusiasts',
      ],
    },
  },
  {
    id: 'art-5',
    type: 'ai-insights',
    title: 'AI Insights â€” This Week',
    status: 'live',
    version: 1,
    isCollapsed: true,
    createdAt: new Date('2026-02-16'),
    updatedAt: new Date('2026-02-16'),
    data: {
      insights: [
        {
          type: 'anomaly',
          severity: 'high',
          title: 'CPA spike detected',
          description: 'Cost per acquisition jumped 40% overnight due to increased competition.',
          metric: 'CPA',
          change: 40,
          suggestedAction: 'Narrow audience or adjust bid strategy',
        },
        {
          type: 'opportunity',
          severity: 'medium',
          title: 'Lookalike audience opportunity',
          description: 'Your top converters share similar demographics. A lookalike audience could improve results.',
          metric: 'Conversions',
          change: 25,
          suggestedAction: 'Create a 1% lookalike from recent purchasers',
        },
      ],
    },
  },
  {
    id: 'art-6',
    type: 'automation-rule',
    title: 'Auto-pause high CPA ads',
    status: 'live',
    version: 1,
    isCollapsed: true,
    createdAt: new Date('2026-02-14'),
    updatedAt: new Date('2026-02-16'),
    data: {
      name: 'Auto-pause high CPA',
      trigger: 'CPA exceeds $20',
      condition: 'For 24 consecutive hours',
      action: 'Pause ad set',
      isActive: true,
      autoExecute: false,
      lastTriggered: '2026-02-15T14:30:00',
    },
  },
  {
    id: 'art-7',
    type: 'data-table',
    title: 'Top 10 Campaigns â€” Last 7 Days',
    status: 'live',
    version: 1,
    isCollapsed: false,
    createdAt: new Date('2026-02-16'),
    updatedAt: new Date('2026-02-16'),
    data: {
      summary: 'Here are your top 10 performing campaigns from the last 7 days, ranked by ROAS. Your Spring Sale retargeting campaign is leading with a 6.2x return â€” nearly double the account average.',
      highlights: [
        { label: 'Avg ROAS', value: '3.8x', trend: 'up' },
        { label: 'Total Spend', value: 'â‚¹18,420', trend: 'neutral' },
        { label: 'Total Revenue', value: 'â‚¹69,996', trend: 'up' },
        { label: 'Best CPA', value: 'â‚¹112', trend: 'down' },
      ],
      columns: [
        { key: 'campaign', label: 'Campaign', highlight: true },
        { key: 'spend', label: 'Spend', align: 'right' },
        { key: 'revenue', label: 'Revenue', align: 'right', highlight: true },
        { key: 'roas', label: 'ROAS', align: 'right', highlight: true },
        { key: 'cpa', label: 'CPA', align: 'right' },
        { key: 'conversions', label: 'Conv.', align: 'right' },
        { key: 'ctr', label: 'CTR', align: 'right' },
        { key: 'trend', label: '7d Trend', align: 'right' },
      ],
      rows: [
        ['Spring Sale â€” Retargeting', 'â‚¹2,840', 'â‚¹17,608', '6.2x', 'â‚¹112', '25', '4.8%', '+23%'],
        ['Product Demo â€” Video Views', 'â‚¹2,120', 'â‚¹10,600', '5.0x', 'â‚¹132', '16', '3.9%', '+15%'],
        ['Lookalike â€” Top Purchasers', 'â‚¹1,950', 'â‚¹8,775', '4.5x', 'â‚¹140', '14', '3.6%', '+8%'],
        ['Brand Awareness â€” Feed', 'â‚¹2,400', 'â‚¹9,600', '4.0x', 'â‚¹160', '15', '3.2%', '+5%'],
        ['Summer Teaser â€” Stories', 'â‚¹1,680', 'â‚¹6,384', '3.8x', 'â‚¹168', '10', '3.4%', '+12%'],
        ['Flash Sale â€” Carousel', 'â‚¹2,100', 'â‚¹7,350', '3.5x', 'â‚¹175', '12', '2.9%', '-3%'],
        ['New Arrivals â€” DPA', 'â‚¹1,450', 'â‚¹4,350', '3.0x', 'â‚¹182', '8', '2.7%', '+2%'],
        ['Engagement â€” Reels', 'â‚¹1,280', 'â‚¹3,200', '2.5x', 'â‚¹213', '6', '2.4%', '-8%'],
        ['Cold Audience â€” Interests', 'â‚¹1,600', 'â‚¹2,880', '1.8x', 'â‚¹228', '7', '1.9%', '-12%'],
        ['Evergreen â€” Broad Targeting', 'â‚¹1,000', 'â‚¹1,250', '1.3x', 'â‚¹333', '3', '1.2%', '-18%'],
      ],
      topRowIndex: 0,
      footnote: 'Data from Feb 9 â€” Feb 16, 2026 Â· Sorted by ROAS Â· Click column headers to re-sort',
    },
  },
];

// Template artifacts for simulated responses
export const artifactTemplates: Record<string, Partial<Artifact>> = {
  'campaign-blueprint': {
    type: 'campaign-blueprint',
    title: 'New Campaign Blueprint',
    data: {
      campaignName: 'New Campaign',
      objective: 'Sales',
      platform: 'Facebook',
      budget: { daily: 30, total: 900 },
      targeting: { ageRange: '18-55', interests: ['General'], locations: ['US'] },
      schedule: { startDate: '2026-03-01', endDate: '2026-03-31' },
      adSets: 1,
      primaryText: '',
      cta: 'Learn More',
    },
  },
  'campaign-live': {
    type: 'campaign-live',
    title: 'Live Campaign',
    data: {
      campaignName: 'Campaign',
      objective: 'Sales',
      platform: 'Facebook',
      budget: { daily: 50, total: 1500, spent: 420 },
      status: 'active',
      publishedAt: new Date().toISOString(),
      adSets: 2,
      activeAds: 4,
    },
  },
  'creative-set': {
    type: 'creative-set',
    title: 'Creative Set',
    data: {
      name: 'New Creative Set',
      count: 2,
      items: [
        { id: 'cr-new-1', label: 'Ad Image 1', format: 'image', dimensions: '1200Ã—628' },
        { id: 'cr-new-2', label: 'Ad Image 2', format: 'image', dimensions: '1080Ã—1080' },
      ],
    },
  },
  'creative-variant': {
    type: 'creative-variant',
    title: 'Creative Variant',
    data: {
      parentSetId: '',
      label: 'Variant A',
      headline: 'Your headline here',
      primaryText: 'Your ad copy here',
      cta: 'Shop Now',
      format: 'image',
      dimensions: '1200Ã—628',
    },
  },
  'video-creative': {
    type: 'video-creative',
    title: 'Video Creative',
    data: {
      name: 'New Video',
      duration: '30s',
      avatar: 'Sophia',
      script: '',
      status: 'generating',
    },
  },
  'performance-snapshot': {
    type: 'performance-snapshot',
    title: 'Performance Snapshot',
    data: {
      dateRange: 'Last 7 days',
      metrics: { spent: 0, revenue: 0, roi: 0, conversions: 0, ctr: 0, impressions: 0 },
      topCampaign: '',
      recommendations: [],
    },
  },
  'ai-insights': {
    type: 'ai-insights',
    title: 'AI Insights',
    data: { insights: [] },
  },
  'automation-rule': {
    type: 'automation-rule',
    title: 'Automation Rule',
    data: {
      name: 'New Rule',
      trigger: '',
      condition: '',
      action: '',
      isActive: false,
      autoExecute: false,
    },
  },
  'publish-confirmation': {
    type: 'publish-confirmation',
    title: 'Publish Confirmation',
    data: {
      campaignName: '',
      platform: 'Facebook',
      publishedAt: '',
      adCount: 0,
      budget: { daily: 0, total: 0 },
      status: 'pending',
    },
  },
  'ai-signals-summary': {
    type: 'ai-signals-summary',
    title: 'AI Signals Summary',
    data: {
      period: 'Last 7 days',
      signals: [],
      actionsTaken: 0,
      actionsRemaining: 0,
    },
  },
  'product-analysis': {
    type: 'product-analysis',
    title: 'Product Analysis',
    data: {
      productName: '',
      imageUrl: '',
      price: '',
      category: '',
      description: '',
      keyFeatures: [],
      targetAudience: '',
    },
  },
  'script-options': {
    type: 'script-options',
    title: 'Script Options',
    data: {
      scripts: [],
      selectedScriptId: null,
    },
  },
  'avatar-selection': {
    type: 'avatar-selection',
    title: 'Avatar Selection',
    data: {
      avatars: [],
      selectedAvatarId: null,
    },
  },
  'generation-progress': {
    type: 'generation-progress',
    title: 'Generation Progress',
    data: {
      stage: 'analyzing',
      progress: 0,
      outputs: [],
    },
  },
  'creative-result': {
    type: 'creative-result',
    title: 'Creative Results',
    data: {
      outputs: [],
      selectedIndex: 0,
    },
  },
  'facebook-connect': {
    type: 'facebook-connect',
    title: 'Facebook Connect',
    data: {
      status: 'disconnected',
      accountName: null,
      adAccounts: [],
    },
  },
  'campaign-config': {
    type: 'campaign-config',
    title: 'Campaign Configuration',
    data: {
      campaignLevel: { name: '', objective: '', budgetType: '', budget: 0 },
      adSetLevel: { name: '', budget: 0, duration: '', pixelId: '', targeting: {} },
      adLevel: { name: '', pageName: '', primaryText: '', headline: '', cta: '', websiteUrl: '', creative: null },
    },
  },
  'device-preview': {
    type: 'device-preview',
    title: 'Device Preview',
    data: {
      activeDevice: 'mobile',
      ad: { pageName: '', primaryText: '', headline: '', cta: '', imageUrl: '', websiteUrl: '' },
    },
  },
  'data-table': {
    type: 'data-table',
    title: 'Data Table',
    data: {
      summary: '',
      highlights: [],
      columns: [],
      rows: [],
      footnote: '',
    },
  },
};

export const mockMessages: ThreadMessage[] = [
  {
    id: 'msg-1',
    role: 'assistant',
    content: "Welcome to your workspace! I can help you plan campaigns, create ads, analyze performance, and set up automations â€” all in this thread. What would you like to work on?",
    timestamp: new Date('2026-02-14T09:00:00'),
  },
  {
    id: 'msg-2',
    role: 'user',
    content: 'Plan a Spring Sale campaign for Facebook targeting US and UK customers aged 25-45.',
    timestamp: new Date('2026-02-14T09:01:00'),
  },
  {
    id: 'msg-3',
    role: 'assistant',
    content: "I've drafted a campaign blueprint for your Spring Sale. You can edit any field directly â€” click on a value to change it. I've also prepared a creative set and a video creative to go with it.",
    timestamp: new Date('2026-02-14T09:01:30'),
    artifactIds: ['art-1', 'art-2', 'art-3'],
  },
  {
    id: 'msg-4',
    role: 'user',
    content: "How's the campaign performing this week?",
    timestamp: new Date('2026-02-16T10:00:00'),
  },
  {
    id: 'msg-5',
    role: 'assistant',
    content: "Here's your weekly snapshot. ROI is strong at 4.5x, but I've flagged some insights and set up an automation rule to protect your spend.",
    timestamp: new Date('2026-02-16T10:00:30'),
    artifactIds: ['art-4', 'art-5', 'art-6'],
  },
  {
    id: 'msg-6',
    role: 'user',
    content: 'Show me my top 10 performing campaigns from the last 7 days',
    timestamp: new Date('2026-02-16T11:00:00'),
  },
  {
    id: 'msg-7',
    role: 'assistant',
    content: "Here's your top 10 breakdown. Your retargeting campaign is crushing it â€” 6.2x ROAS with the lowest CPA in the account. I'd recommend shifting more budget there and pausing the bottom two performers.",
    timestamp: new Date('2026-02-16T11:00:30'),
    artifactIds: ['art-7'],
    actionChips: [
      { label: 'ðŸ’° Shift budget to top 3', action: 'shift-budget-top3' },
      { label: 'â¸ï¸ Pause bottom performers', action: 'pause-underperformers' },
      { label: 'ðŸ“Š Compare with last month', action: 'compare-last-month' },
    ],
  },
];

export function getThreadWithData(threadId: string): Thread | null {
  const thread = mockThreads.find(t => t.id === threadId);
  if (!thread) return null;
  return {
    ...thread,
    messages: threadId === 'thread-1' ? mockMessages : [mockMessages[0]],
    artifacts: threadId === 'thread-1' ? mockArtifacts : [],
  };
}
